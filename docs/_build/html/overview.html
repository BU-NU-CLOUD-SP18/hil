<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>HaaS Architecture Overview &#8212; HIL 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="HIL 1.0 documentation" href="index.html" />
    <link rel="next" title="INSTALL" href="INSTALL.html" />
    <link rel="prev" title="HaaS" href="README.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="haas-architecture-overview">
<span id="haas-architecture-overview"></span><h1>HaaS Architecture Overview<a class="headerlink" href="#haas-architecture-overview" title="Permalink to this headline">¶</a></h1>
<p>The HaaS (Hardware as a Service) is a tool used to perform network
isolation of physical machines, so that different parties can be
given physical capacity within the same data center, without needing
to trust each other.</p>
<div class="section" id="operation">
<span id="operation"></span><h2>Operation<a class="headerlink" href="#operation" title="Permalink to this headline">¶</a></h2>
<p>From a user&#8217;s perspective, the HaaS allows one to:</p>
<ul class="simple">
<li>allocate physical nodes</li>
<li>create login/management nodes (sometimes called headnodes)</li>
<li>configure networks, in particular:<ul>
<li>create logical networks</li>
<li>connect physical nodes to those logical networks (on a per-nic basis)</li>
</ul>
</li>
<li>connect login/management nodes to those networks.</li>
</ul>
<p>Right now, we&#8217;re using 802.1q VLANs to achieve network isolation. The
HaaS communicates with a managed switch, to which the physical
hardware is attached. When networking operations are performed, the
HaaS sends commands to the switch which configure the relevant ports
as needed to create the logical networks.</p>
</div>
<div class="section" id="anatomy-of-a-running-installation">
<span id="anatomy-of-a-running-installation"></span><h2>Anatomy of a Running Installation<a class="headerlink" href="#anatomy-of-a-running-installation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span>                          <span class="n">SWITCH</span>
                       <span class="n">_____________</span>
  <span class="o">&lt;</span><span class="n">nic1</span><span class="o">&gt;---------------</span><span class="p">]</span> <span class="n">access</span><span class="p">{</span><span class="n">N</span><span class="p">}</span> <span class="o">|</span>
<span class="o">=</span><span class="n">node</span><span class="o">-</span><span class="mi">1</span><span class="o">=</span>               <span class="o">|</span>           <span class="o">|</span>
  <span class="o">&lt;</span><span class="n">nic2</span><span class="o">&gt;---------------</span><span class="p">]</span>           <span class="o">|</span>
                       <span class="o">|</span>           <span class="o">|</span>
                       <span class="o">|</span>           <span class="o">|</span>             <span class="p">(</span>                                      <span class="p">)</span>
                       <span class="o">|</span>           <span class="o">|</span>             <span class="p">(</span>    <span class="o">^</span><span class="n">br</span><span class="o">-</span><span class="n">vlanM</span><span class="o">^------^</span><span class="n">trunk</span><span class="o">-</span><span class="n">nic</span><span class="o">.</span><span class="n">M</span><span class="o">^</span>     <span class="p">)</span>
  <span class="o">&lt;</span><span class="n">nic1</span><span class="o">&gt;---------------</span><span class="p">]</span> <span class="n">access</span><span class="p">{</span><span class="n">M</span><span class="p">}</span> <span class="o">|</span>             <span class="p">(</span> <span class="o">%</span><span class="n">hn</span><span class="o">-</span><span class="n">B</span><span class="o">%</span>                               <span class="p">)</span>
<span class="o">=</span><span class="n">node</span><span class="o">-</span><span class="mi">2</span><span class="o">=</span>               <span class="o">|</span>           <span class="o">|</span>             <span class="p">(</span>                                      <span class="p">)</span>
  <span class="o">&lt;</span><span class="n">nic2</span><span class="o">&gt;---------------</span><span class="p">]</span>           <span class="o">|</span>             <span class="p">(</span> <span class="o">%</span><span class="n">hn</span><span class="o">-</span><span class="n">A</span><span class="o">%</span>                               <span class="p">)</span>
                       <span class="o">|</span>           <span class="o">|</span>             <span class="p">(</span>    <span class="o">^</span><span class="n">br</span><span class="o">-</span><span class="n">vlanN</span><span class="o">^------^</span><span class="n">trunk</span><span class="o">-</span><span class="n">nic</span><span class="o">.</span><span class="n">N</span><span class="o">^</span>     <span class="p">)</span>
                       <span class="o">|</span>           <span class="o">|</span>             <span class="p">(</span>                                      <span class="p">)</span>
                       <span class="o">|</span>           <span class="o">|</span>             <span class="p">(</span>                                      <span class="p">)</span>
  <span class="o">&lt;</span><span class="n">nic1</span><span class="o">&gt;---------------</span><span class="p">]</span>     <span class="n">trunk</span> <span class="p">[</span><span class="o">--------&lt;</span><span class="n">trunk</span><span class="o">-</span><span class="n">nic</span><span class="o">&gt;=</span><span class="n">haas</span><span class="o">-</span><span class="n">master</span><span class="o">=</span>
<span class="o">=</span><span class="n">node</span><span class="o">-</span><span class="mi">3</span><span class="o">=</span>               <span class="o">|</span>           <span class="o">|</span>
  <span class="o">&lt;</span><span class="n">nic2</span><span class="o">&gt;---------------</span><span class="p">]</span><span class="n">___________</span><span class="p">[</span>

    <span class="n">Legend</span><span class="p">:</span>

        <span class="p">(</span> <span class="n">running</span> <span class="ow">in</span> <span class="n">software</span> <span class="p">)</span>
        <span class="o">&lt;</span><span class="n">physical</span> <span class="n">network</span> <span class="n">interface</span><span class="o">&gt;</span>
        <span class="o">^</span><span class="n">virtual</span><span class="o">/</span><span class="n">logical</span> <span class="n">network</span> <span class="n">interface</span><span class="o">^</span>
        <span class="o">=</span><span class="n">physical</span> <span class="n">node</span><span class="o">=</span>
        <span class="o">%</span><span class="n">virtualized</span> <span class="n">node</span><span class="o">%</span>
        <span class="p">]</span><span class="o">/</span><span class="p">[</span> <span class="n">switch</span><span class="s1">&#39;s Ethernet ports</span>
        <span class="o">---</span> <span class="n">connection</span> <span class="p">(</span><span class="n">virtual</span> <span class="ow">or</span> <span class="n">physical</span><span class="p">)</span>
        <span class="n">access</span><span class="p">{</span><span class="n">X</span><span class="p">}</span> <span class="n">Denotes</span> <span class="n">that</span> <span class="n">the</span> <span class="n">adjacent</span> <span class="n">port</span> <span class="ow">is</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">access</span> <span class="n">mode</span><span class="p">,</span> <span class="k">with</span> <span class="n">vlan</span> <span class="c1">#X.</span>
        <span class="n">trunk</span> <span class="n">Denotes</span> <span class="n">that</span> <span class="n">the</span> <span class="n">adjacent</span> <span class="n">port</span> <span class="ow">is</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">trunk</span> <span class="n">mode</span><span class="o">.</span>
</pre></div>
</div>
<p>A typical installation of the HaaS will have the following components:</p>
<ul class="simple">
<li>The HaaS API server and headnode VM host</li>
<li>A managed switch</li>
<li>One or more physical nodes, each of which has one or more network
interfaces.</li>
</ul>
<p>These components will be configured as follows:</p>
<ul class="simple">
<li>All of the physical nodes will have some subset (possibly all) of
their nics connected to the managed switch.<ul>
<li>The ports that these are connected to will be set to access mode.</li>
</ul>
</li>
<li>The HaaS headnode host will have one nic connected to the managed switch.<ul>
<li>The corresponding port will be set to trunk mode, with all vlans
enabled.</li>
</ul>
</li>
<li>The HaaS master will be running the libvirt daemon, which will have at least
one VM, powered off, which can be cloned and started to provide
login/management nodes.</li>
<li>A network object in the HaaS corresponds to a vlan id.  (In future versions,
we will also allow other mechanisms, such as VXLAN.)  Network operations
have the following effects<ul>
<li>Ports added to the network will have their access vlan set to the vlan id
associated with the network.</li>
<li>Ports removed from the network will be set to access no vlans.</li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">HaaS Architecture Overview</a><ul>
<li><a class="reference internal" href="#operation">Operation</a></li>
<li><a class="reference internal" href="#anatomy-of-a-running-installation">Anatomy of a Running Installation</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="README.html" title="previous chapter">HaaS</a></li>
      <li>Next: <a href="INSTALL.html" title="next chapter">INSTALL</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/overview.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, HIL Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/overview.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>